# 🌕 전란 그리고 요괴

조선시대 양란(임진왜란, 병자호란) 직후의 혼란한 시기를 배경으로,  
요괴와 원혼을 처치하며 마을의 불미스러운 일을 해결해 나가는 **텍스트 기반 턴제 RPG 게임**입니다.

---

## 🎮 **게임 실행 방법**

```bash
python main.py
```

---

## ✨ **완성된 주요 기능들**

### 🏛️ **직업 시스템**
3가지 직업으로 플레이할 수 있습니다:

| 직업 | HP | 공격력 | 방어력 | 속도 | 특징 |
|------|----|----|----|----|------|
| **무사** | 120 | 18 | 15 | 8 | 높은 체력과 방어력의 탱커형 |
| **도사** | 80 | 12 | 8 | 10 | 균형잡힌 마법사형 |
| **유랑객** | 90 | 14 | 10 | 18 | 높은 속도의 어쌔신형 |

### ⚔️ **다중 몬스터 전투 시스템** 🆕
- **확률적 다중 스폰**: 전투마다 최소 1마리, 최대 3마리 몬스터 출현
- **지역별 차등 확률**: 위험도에 따라 다중 스폰 확률 상이
  - 🟢 **안전 지역**: 85% (1마리), 15% (2마리)
  - 🟡 **높은 위험**: 70% (1마리), 30% (2마리)
  - 🔴 **매우높음**: 50% (1마리), 40% (2마리), 10% (3마리)
  - ⚫ **극도로높음**: 30% (1마리), 50% (2마리), 20% (3마리)
- **무리 사냥 특성**: 들개령 등 특정 몬스터의 집단 출현 확률 증가
- **스마트 구별 시스템**: 같은 종류 몬스터 여러 마리 시 자동 번호 부여 (예: 들개령 #1, #2)
- **다중 타겟 전투**: 공격/스킬 대상 선택, 개별 몬스터 상태 추적
- **누적 경험치**: 모든 처치 몬스터 경험치 합산 (최대 3배 + 지역 보너스)

### 🔮 **고급 전투 시스템**
- **턴제 전투**: 플레이어와 적이 번갈아가며 행동
- **5가지 행동**: 공격, 스킬 사용, 아이템 사용, 대상 선택, 도망
- **동적 피해 계산**: `공격력 - 방어력` 기반 (최소 1 피해)
- **전략적 도망**: 가장 빠른 적 기준 속도 비교로 성공률 결정
- **실시간 상태 표시**: 모든 살아있는 적의 HP 및 상태이상 표시

### 🔮 **직업별 스킬 시스템**

#### 무사 스킬
- **강력한 베기**: 강력한 물리 피해 (MP 5)
- **방패 가격**: 기절 상태이상 유발 확률 (MP 4)

#### 도사 스킬  
- **화염구**: 화상 상태이상 유발 확률 (MP 6)
- **서리파동**: 빙결 상태이상 유발 확률 (MP 4)

#### 유랑객 스킬
- **급소 찔러내기**: 높은 치명타 피해 (MP 6)
- **독 단검**: 독 상태이상 유발 확률 (MP 4)

### 🌟 **상태이상 시스템**
상태이상은 3턴 지속되며 각각 고유한 효과를 가집니다:

- **🔥 화상**: 매 턴 최대 HP의 10% 피해
- **☠️ 독**: 매 턴 최대 HP의 8% 피해  
- **🧊 빙결**: 행동 불가 상태 (실제 행동 차단)
- **😵 기절**: 행동 불가 상태 (실제 행동 차단)

### 📈 **레벨업 시스템**
- **경험치 획득**: 적 처치 시 경험치 획득
- **레벨업 조건**: 경험치 `레벨 × 100`마다 레벨업
- **레벨업 보상**:
  - HP +10 (즉시 회복)
  - 공격력 +2
  - 방어력 +1  
  - 최대 MP +5

### 🔋 **MP 회복 시스템**
- **자동 회복**: 매 턴 종료 시 MP 2씩 회복
- **최대 MP**: 30 + (레벨-1) × 5
- **MP 표시**: 전투 UI에서 현재/최대 MP 표시

### 🎒 **아이템 & 인벤토리 시스템**

#### 기본 회복 아이템
- **소형 약초**: 체력 25 회복
- **대형 약초**: 체력 50 회복
- **마력 물약**: 마력 15 회복

#### 시작 지급 아이템
- 소형 약초 × 3
- 마력 물약 × 2

#### 아이템 사용
- 전투 중 "3. 아이템 사용" 선택
- 인벤토리에서 아이템 선택 후 즉시 효과 적용
- 체력/마력이 가득 찬 상태에서는 사용 제한

### 🗺️ **지역 탐험 시스템**
조선 팔도를 모티브로 한 8개 지역을 자유롭게 탐험할 수 있습니다:

#### 주요 지역
- **🏰 한양**: 조선의 중심지, 모든 상점 이용 가능, 안전한 거점
- **⚓ 제물포**: 서해안 항구도시, 바다를 통한 탐라국 연결
- **⚔️ 한밭**: 요괴가 자주 출몰하는 위험지역, 경험치 +20% 보너스
- **🛤️ 아우내**: 교통의 요충지, 이동비용 할인
- **🌿 빛고을**: 문화 중심지, 약초 할인, 의료 서비스
- **🌋 가마뫼**: 화산지형, 화속성 요괴 출몰, 온천 (MP 회복 +50%)
- **💀 소머리골**: 극도로 위험한 산골, 정신력 -10 페널티, 경험치 +50%
- **🏝️ 탐라국**: 신비로운 섬나라, 경험치 +100%, 배로만 접근 가능

#### 지역 특징
- **연결성**: 인접한 지역으로만 이동 가능
- **위험도**: 각 지역마다 다른 위험 수준과 보상
- **특수 기능**: 상점, 항구, 온천 등 지역별 고유 시설
- **다중 스폰 확률**: 위험도에 따라 몬스터 무리 출현 확률 상이

### 👹 **전통 요괴 시스템**
한국 전설에 등장하는 10종의 요괴가 지역별로 출몰합니다:

#### 요괴 도감
- **도깨비불**: 놀리기 좋아하는 불덩이 (도망 특화)
- **허깨비**: 환상처럼 나타나는 그림자 (회피 특화)
- **들개령**: 굶주린 야생개 혼령 (무리 사냥 특화) 🆕
- **독꼬리**: 맹독을 품은 도마뱀 요괴 (독 전문)
- **썩은시체**: 되살아난 무명자 시신 (탱크형)
- **흐느낌귀**: 밤마다 흐느끼는 망령 (정신 공격)
- **그늘망령**: 어둠의 정령 (디버프 전문)
- **어스름그림자**: 기억을 흐리는 존재 (컨트롤러)
- **뒤틀린손**: 땅속에서 나오는 손들 (속박 공격)
- **메아리귀**: 목소리로 혼란시키는 혼령 (정신 혼란)

#### 요괴별 특수 능력
- **회피형**: 공격 회피율이 높음
- **도망꾼**: 전투 중 도망칠 확률 존재
- **무리 사냥**: 때때로 2-3마리가 동시 출현 🆕
- **탱크형**: 높은 HP와 방어력
- **정신 공격**: 다양한 상태이상 유발

---

## 🧱 **프로젝트 구조**

```
jeonran/
├── main.py                    # 게임 진입점
├── characters/                # 캐릭터 관련
│   ├── base_character.py     # 기본 캐릭터 클래스
│   ├── player.py             # 플레이어 (직업, 레벨업, 인벤토리)
│   └── enemy.py              # 적 캐릭터 (AI, 다중 전투 지원)
├── skills/                    # 스킬 시스템
│   ├── base_skill.py         # 기본 스킬 클래스
│   ├── warrior_skills.py     # 무사 스킬
│   ├── mage_skills.py        # 도사 스킬
│   └── rogue_skills.py       # 유랑객 스킬
├── systems/                   # 게임 시스템
│   ├── battle.py             # 전투 로직 (다중 몬스터 지원)
│   ├── inventory.py          # 인벤토리 시스템
│   ├── item.py               # 아이템 클래스들
│   ├── status_effect.py      # 상태이상 처리
│   ├── region.py             # 지역 시스템
│   └── monsters.py           # 요괴 생성 및 관리 (다중 스폰)
├── data/                      # 게임 데이터 (JSON)
│   ├── items.json           # 아이템 정보
│   ├── monsters.json        # 몬스터 정보
│   └── skills.json          # 스킬 정보
├── test_regions.py           # 지역 시스템 테스트
├── test_monsters.py          # 요괴 시스템 테스트
└── utility/
    └── logger.py             # 로깅 시스템
```

---

## 🎯 **게임플레이 가이드**

### 시작하기
1. 게임 실행 후 캐릭터 이름 입력
2. 직업 선택 (무사/도사/유랑객)
3. 기본 아이템 지급 확인
4. 한양에서 모험 시작

### 다중 전투 가이드 🆕
1. **몬스터 수 확인**: 1-3마리까지 다양하게 출현
2. **대상 선택**: 공격/스킬 사용 시 타겟 선택 가능
3. **우선순위 전략**: 약한 적부터 vs 강한 적 집중 선택
4. **상황 판단**: 불리할 때 전략적 도망 고려
5. **경험치 최대화**: 모든 적 처치 시 누적 보상

### 전투 가이드
1. **기본 공격**: 안정적인 피해, MP 소모 없음
2. **스킬 사용**: 강력하지만 MP 소모, 상태이상 유발 가능
3. **아이템 사용**: 체력/마력 회복, 전략적 타이밍 중요
4. **도망하기**: 속도에 따라 성공률 결정, 유랑객이 가장 유리

### 탐험 전략
- **안전 지역**: 한양에서 회복 및 보급
- **경험치 농장**: 한밭, 소머리골에서 고효율 레벨업
- **다중 전투 활용**: 위험 지역에서 3마리 동시 처치로 최대 경험치
- **특수 지역**: 가마뫼 온천에서 MP 회복, 탐라국에서 최고 경험치
- **지역 연결**: 지도를 숙지하여 효율적인 이동 경로 계획

### 성장 전략
- **레벨업 우선**: 경험치 100 달성 시 크게 강해짐
- **MP 관리**: 스킬과 자동 회복의 균형 맞추기
- **아이템 절약**: 위급할 때만 사용하여 효율성 극대화
- **직업별 플레이**: 무사(탱킹), 도사(마법), 유랑객(기동성) 활용
- **다중 전투 대비**: 회복 아이템 충분히 준비

---

## 📅 **개발 일지**

### **2025-01-27** (최신 업데이트) 🆕
- ✅ **다중 몬스터 전투 시스템**: 1-3마리 확률적 스폰 구현
- ✅ **지역별 차등 스폰**: 위험도에 따른 다중 출현 확률 조정
- ✅ **무리 사냥 특성**: 들개령 등 특정 몬스터 집단 출현 시스템
- ✅ **스마트 구별 시스템**: 동일 몬스터 다중 출현 시 자동 번호 부여
- ✅ **다중 타겟 전투**: 대상 선택, 개별 상태 추적, 전략적 전투
- ✅ **누적 경험치 시스템**: 다중 처치 시 경험치 합산 보상
- ✅ **향상된 도망 시스템**: 가장 빠른 적 기준 확률 계산

### **2025-01-27** (이전 업데이트)
- ✅ **완전한 지역 시스템**: 조선 팔도 8개 지역 구현 완료
- ✅ **전통 요괴 시스템**: 한국 설화 기반 10종 요괴 추가
- ✅ **지역별 몬스터**: 각 지역마다 고유한 요괴 출몰
- ✅ **도망 시스템**: 속도 기반 확률적 도망 구현
- ✅ **상태이상 완성**: 빙결/기절 시 실제 행동 불가 적용
- ✅ **지역 탐험 연동**: 전투 후 지역 이동 선택 시스템
- ✅ **테스트 시스템**: 지역/요괴 시스템 독립 테스트 도구
- ✅ **전체 코드 디버깅**: 모든 시스템 호환성 및 안정성 확보

### **2025-01-26**
- ✅ **아이템 시스템 완성**: 회복 아이템 3종 구현
- ✅ **인벤토리 시스템**: 아이템 추가/사용/관리 기능
- ✅ **MP 회복 시스템**: 턴당 2씩 자동 회복
- ✅ **레벨업 시스템**: 경험치 기반 스탯 증가
- ✅ **상태이상 강화**: 실제 데미지 효과 구현
- ✅ **버그 수정**: 유랑객 스킬명, 중복 코드 정리

### **2025-05-31**
- ✅ **전투 시스템 고도화**: 스킬 사용 후 턴 진행 수정
- ✅ **직업별 스킬 완성**: 각 직업당 고유 스킬 2종
- ✅ **게임 월드 기획**: 8개 지역 구성 및 이동 규칙
- ✅ **요괴/몬스터 설계**: 지역별 대표 요괴 설정

### **2025-05-30**  
- ✅ **기초 시스템**: 직업 선택, 기본 전투, 적 AI

---

## 🚀 **향후 개발 계획**

### 🎯 **단기 목표**
- [ ] 상점 시스템 고도화 (지역별 특수 아이템)
- [ ] 더 다양한 회복/버프 아이템 추가
- [ ] 요괴별 고유 드롭 아이템
- [ ] 세이브/로드 기능

### 🌍 **중기 목표**  
- [ ] 퀘스트 시스템 (지역별 고유 미션)
- [ ] 스토리 모드 (조선시대 배경 시나리오)
- [ ] 보스 요괴 시스템 (대규모 다중 전투)
- [ ] 동료/NPC 시스템

### 📚 **장기 목표**
- [ ] 다양한 무기/방어구 시스템
- [ ] 계절 시스템 (요괴 출현 변화)
- [ ] 멀티엔딩 스토리
- [ ] 도전 과제 시스템

---

## 🎨 **게임의 특징**

- 🇰🇷 **한국적 배경**: 조선시대 양란 이후 혼란기
- 👹 **전통 요괴**: 한국 전설의 요괴들과 전투
- 🗺️ **지역 탐험**: 조선 팔도를 모티브로 한 8개 지역
- ⚔️ **전략적 전투**: 스킬, 아이템, 상태이상의 조합
- 🔢 **다중 전투**: 1-3마리 몬스터와의 전략적 다중 전투 🆕
- 📈 **성장의 재미**: 레벨업으로 점점 강해지는 캐릭터
- 🎭 **직업별 개성**: 각기 다른 플레이 스타일
- 🎲 **랜덤 요소**: 지역별 랜덤 요괴 출현과 다중 스폰 시스템

---

**현재 게임은 완전히 플레이 가능한 상태입니다!** 🎉  
각 직업의 고유한 스킬과 아이템을 활용해 조선 팔도를 탐험하며 전통 요괴들과 전략적인 다중 전투를 즐겨보세요.

## 🛠️ **테스트 도구**

개발된 시스템들을 개별적으로 테스트할 수 있습니다:

```bash
# 지역 시스템 테스트
python test_regions.py

# 요괴 시스템 테스트  
python test_monsters.py
```
